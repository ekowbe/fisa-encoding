<!-- TO RUN TYPE "python3 runserver.py 2" in your server and click the link -->
<!DOCTYPE html>


<html>

<head>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"></script>
   <title>FISA</title>
</head>

<body>

   <div class="container">
      <h1 class="display-1">Does FISA apply to you?</h1>
      <!-- <form action="check_FISA" method="GET"> -->
      <div id="myForm">
         <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="acquired">
            <label class="form-check-label" for="acquired">was info or communication acquired?</label>
         </div>

         <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="surveillance">
            <label class="form-check-label" for="surveillance">is this device an electronic, mechanical, or other
               surveillance device?</label>
         </div>

         <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="wire">
            <label class="form-check-label" for="wire">was the communication a wire</label>
         </div>

         <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="radio">
            <label class="form-check-label" for="radio">was the communication a radio</label>
         </div>

         <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="US_location_sender">
            <label class="form-check-label" for="US_location_sender">was the sender in the United States during the
               acquisition</label>
         </div>

         <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="US_location_attacker">
            <label class="form-check-label" for="US_location_attacker">was the potential attacker in the United States
               during the acquisition</label>
         </div>

         <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="targeted">
            <label class="form-check-label" for="targeted">is this person being intentionally targeted?</label>
         </div>

         <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="privacy">
            <label class="form-check-label" for="privacy">
               was there a reasonable expectation of privacy for this person?
            </label>
         </div>

         <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="warrant">
            <label class="form-check-label" for="warrant">
               would a warrant be required for law enforcement?
            </label>
         </div>

         <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="us_person">
            <label class="form-check-label" for="us_person">is this person considered a US person? or is any person
               within
               this list of person considered a US person?</label>
         </div>

         <div class="form-check form-switch">
            <input name="known_and_particular" class="form-check-input" type="checkbox" role="switch"
               id="known_and_particular">
            <label class="form-check-label" for="known_and_particular">is a person in this list is particular and known
               to be a US person</label>
         </div>

         <div class="form-check form-switch">
            <input name="privacy_sender" class="form-check-input" type="checkbox" role="switch" id="privacy_sender">
            <label class="form-check-label" for="privacy_sender">Did the sender have a reasonable expectation of
               privacy</label>
         </div>

         <div class="form-check form-switch">
            <input name="privacy_recipients" class="form-check-input" type="checkbox" role="switch"
               id="privacy_recipients">
            <label class="form-check-label" for="privacy_recipients">Did the recipient have a reasonable expectation of
               privacy</label>
         </div>

         <div class="form-check form-switch">
            <input name="intended_recipients_US" class="form-check-input" type="checkbox" role="switch"
               id="intended_recipients_US">
            <label class="form-check-label" for="intended_recipients_US">are the intended recipients US persons</label>
         </div>

         <div class="form-check form-switch">
            <input name="known_and_particular_recipients" class="form-check-input" type="checkbox" role="switch"
               id="known_and_particular_recipients">
            <label class="form-check-label" for="known_and_particular_recipients">is a person in the list of intended recipients particular and known
               to be a US person</label>
         </div>

         <div class="form-check form-switch">
            <input name="intended_recipients_in_US" class="form-check-input" type="checkbox" role="switch"
               id="intended_recipients_in_US">
            <label class="form-check-label" for="intended_recipients_US">are the intended recipients US persons</label>
         </div>

         <div class="form-check form-switch">
            <input name="consented_sender" class="form-check-input" type="checkbox" role="switch" id="consented_sender">
            <label class="form-check-label" for="consented_sender">did the sender consent to the acquisition in
               question?</label>
         </div>

         <div class="form-check form-switch">
            <input name="consented_recipient" class="form-check-input" type="checkbox" role="switch"
               id="consented_recipient">
            <label class="form-check-label" for="consented_recipient">did the recipient consent to the acquisition in
               question?</label>
         </div>

         <div class="form-check form-switch">
            <input name="covered" class="form-check-input" type="checkbox" role="switch" id="covered">
            <label class="form-check-label" for="covered">is this the communication of computer trespassers, permissible
               under section 2511(2)(i) of title 18</label>
         </div>

         <div class="form-check form-switch">
            <input name="monitoring" class="form-check-input" type="checkbox" role="switch" id="monitoring">
            <label class="form-check-label" for="monitoring">was this device installed or used for monitoring to acquire
               info?</label>
         </div>

         <div class="form-check form-switch">
            <input name="intentional" class="form-check-input" type="checkbox" role="switch" id="intentional">
            <label class="form-check-label" for="intentional">was the acquisition intentional?</label>
         </div>
      </div>

      <button id="submitButton" class="btn btn-primary mb-3">Submit</button>

      <!-- </form> -->

      <p class="resultPar" id="electronic_surveillance"></p>
   </div>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
   <script>
      let output_str = ""
      let request = null;

      function getResults() {
         console.log("let's do results")
         if ($('#acquired').is(':checked')) {
            output_str = output_str + `ASSERT acquired(communication) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT acquired(communication) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#surveillance').is(':checked')) {
            output_str = output_str + `ASSERT surveillance_device(device) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT surveillance_device(device) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#wire').is(':checked')) {
            output_str = output_str + `ASSERT communication_type(communication, wire) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT communication_type(communication, wire) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#radio').is(':checked')) {
            output_str = output_str + `ASSERT communication_type(communication, radio) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT communication_type(communication, radio) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#us_person').is(':checked')) {
            output_str = output_str + `ASSERT US_person(sender) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT US_person(sender) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#known_and_particular').is(':checked')) {
            output_str = output_str + `ASSERT known_and_particular(sender) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT known_and_particular(sender) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#US_location_sender').is(':checked')) {
            output_str = output_str + `ASSERT location(sender, US) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT location(sender, US) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#US_location_attacker').is(':checked')) {
            output_str = output_str + `ASSERT location(attacker, US) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT location(attacker, US) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#intended_recipients_US').is(':checked')) {
            output_str = output_str + `ASSERT US_person(intended_recipients) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT US_person(intended_recipients) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#known_and_particular_recipients').is(':checked')) {
            output_str = output_str + `ASSERT known_and_particular(intended_recipients) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT known_and_particular(intended_recipients) <=> FALSE;`
         }
         
         output_str = output_str + '\n'

         if ($('#intended_recipients_in_US').is(':checked')) {
            output_str = output_str + `ASSERT location(intended_recipients, US) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT location(intended_recipients, US) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#privacy_sender').is(':checked')) {
            output_str = output_str + `ASSERT privacy(sender) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT privacy(sender) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#privacy_recipients').is(':checked')) {
            output_str = output_str + `ASSERT privacy(intended_recipients) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT privacy(intended_recipients) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#warrant').is(':checked')) {
            output_str = output_str + `ASSERT warrant(attack) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT warrant(attack) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#consented_recipient').is(':checked')) {
            output_str = output_str + `ASSERT consented(sender) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT consented(sender) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#consented_recipient').is(':checked')) {
            output_str = output_str + `ASSERT consented(intended_recipients) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT consented(intended_recipients) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#intentional').is(':checked')) {
            output_str = output_str + `ASSERT intentional(attack) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT intentional(attack) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#covered').is(':checked')) {
            output_str = output_str + `ASSERT covered(attack) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT covered(attack) <=> FALSE;`
         }

         output_str = output_str + '\n'

         if ($('#monitoring').is(':checked')) {
            output_str = output_str + `ASSERT monitoring(device) <=> TRUE;`
         } else {
            output_str = output_str + `ASSERT monitoring(device) <=> FALSE;`
         }

         output_str = output_str + '\n'

         output_str = encodeURIComponent(output_str);

         console.log(output_str)
         let url = '/check_FISA?axioms=' + output_str

            if (request != null)
                request.abort();

            request = $.ajax({
                type: 'GET',
                url: url,
                success: handleResponse
            });


      }

      function handleResponse(response) {
         console.log("it worked!")
         $('#electronic_surveillance').html(response);
         
      }



      function setup() {
         $('#submitButton').on('click', getResults);
      }


      $('document').ready(setup);
   </script>
</body>


</html>